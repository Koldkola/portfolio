<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Archive ‚Äî Kenechi Obiozor</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
  <div class="ambient-bg"></div>

  <div id="archive-lock" class="page-lock" aria-hidden="true">
    <div class="page-lock-card" role="dialog" aria-labelledby="archive-lock-title" aria-modal="true">
      <h2 id="archive-lock-title">Archive Locked</h2>
      <p>Enter the password to view this page.</p>
      <form id="archive-lock-form">
        <input id="archive-lock-input" type="password" placeholder="Password" autocomplete="current-password" required />
        <button type="submit" class="btn primary">Unlock</button>
      </form>
      <a class="btn secondary" href="/">Back to Home</a>
      <p id="archive-lock-error" class="page-lock-error" aria-live="polite"></p>
    </div>
  </div>

  <header class="site-header">
    <nav class="nav">
      <a class="logo" href="/">Kumachi.</a>
      <ul class="nav-links">
        <li><a href="/projects.html">Projects </a></li>
        <li><a href="/archive.html">Archive </a></li>
        <li><a href="/resume.html">Resume</a></li>
        <li><a href="/contact.html">Contact</a></li>
      </ul>
      <button id="archiveAdminBtn" class="board-admin-btn" type="button" title="Archive admin mode (Manual lock - stays unlocked until manually locked)">üîí</button>
      <button id="archive-lock-toggle" class="btn secondary archive-lock-toggle" type="button">Lock Archive</button>
    </nav>
    <div class="site-search">
      <input id="siteSearch" type="search" placeholder="Search the portfolio..." aria-label="Search the portfolio" />
      <div id="siteSearchResults" class="site-search-results" role="listbox" aria-label="Search results"></div>
    </div>
    <div class="tooltip-hint">üí° <span class="tooltip-hint-text">Hover over <span style="color: #a855f7; font-weight: 600;">underlined words</span> to learn more</span></div>
  </header>

  <main class="creative-section">
    <div class="section-header">
      <h2>The Archive</h2>
      <p>My Thoughts on film, Music, fashion, games and all around entertainment media.</p>
    </div>

    <div id="archive-grid" class="masonry-grid"></div>
  </main>

  <!-- Archive Admin Password Modal -->
  <div id="archive-admin-modal" class="category-modal">
    <div class="category-modal-content" style="max-width: 520px;">
      <div class="category-modal-header">
        <h2>Archive Admin Access</h2>
        <button class="category-modal-close" onclick="closeArchiveAdminModal()" aria-label="Close modal">&times;</button>
      </div>
      <div class="category-modal-body">
        <form id="archive-admin-form">
          <div class="form-group">
            <label for="archiveAdminPassword">Enter admin password</label>
            <input type="password" id="archiveAdminPassword" required placeholder="Password" />
            <div id="archive-admin-error" style="color: #ff4444; font-size: 0.85rem; margin-top: 8px; display: none;">Incorrect password</div>
          </div>
          <button type="submit" class="btn primary">Unlock Archive Admin</button>
        </form>
        
        <div id="archive-label-settings" style="display: none; margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--glass-border);">
          <h3 style="margin-bottom: 16px; color: var(--text-primary);">Customize Field Labels</h3>
          
          <div class="form-group">
            <label for="labelArchiveTitle">Title Label</label>
            <input type="text" id="labelArchiveTitle" placeholder="Title" />
          </div>
          
          <div class="form-group">
            <label for="labelArchiveTag">Tag Label</label>
            <input type="text" id="labelArchiveTag" placeholder="Tag" />
          </div>
          
          <div class="form-group">
            <label for="labelArchiveDescription">Description Label</label>
            <input type="text" id="labelArchiveDescription" placeholder="Description" />
          </div>
          
          <button type="button" class="btn primary" onclick="saveArchiveLabels()">Save Labels</button>
          <button type="button" class="btn secondary" onclick="resetArchiveLabels()">Reset to Default</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Archive Editor Modal -->
  <div id="archive-editor-modal" class="category-modal">
    <div class="category-modal-content" style="max-width: 900px;">
      <div class="category-modal-header">
        <h2>Archive Editor</h2>
        <button class="category-modal-close" onclick="closeArchiveEditor()" aria-label="Close modal">&times;</button>
      </div>
      <div class="category-modal-body">
        <div class="form-group">
          <label for="archiveTitle">Title</label>
          <input type="text" id="archiveTitle" placeholder="Title" />
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="archiveTag">Tag Text</label>
            <input type="text" id="archiveTag" placeholder="Tag" />
          </div>
          <div class="form-group">
            <label for="archiveTagClass">Tag Style</label>
            <select id="archiveTagClass">
              <option value="tag-horror">Horror & Film</option>
              <option value="tag-fashion">Fashion</option>
              <option value="tag-gaming">Gaming</option>
              <option value="tag-art">Art</option>
              <option value="tag-music">Music</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="archiveImage">Image URL</label>
          <input type="url" id="archiveImage" placeholder="https://" />
        </div>
        <div class="form-group">
          <label for="archivePhoto">Photo Upload (optional)</label>
          <input type="file" id="archivePhoto" accept="image/*" />
        </div>
        <div class="form-group">
          <label for="archiveDescription">Description (HTML allowed for links/images)</label>
          <div class="textarea-wrapper">
            <textarea id="archiveDescription" rows="4" placeholder="Description"></textarea>
            <button type="button" class="emoji-btn" data-target="archiveDescription" title="Add emoji">üòä</button>
          </div>
        </div>
        <div class="form-group">
          <label for="archiveLink">Optional Link (card click)</label>
          <input type="url" id="archiveLink" placeholder="https://" />
        </div>
        <div style="display: flex; gap: 12px; justify-content: flex-end;">
          <button type="button" class="btn secondary" id="archiveDeleteBtn" style="display: none;">Delete</button>
          <button type="button" class="btn secondary" onclick="closeArchiveEditor()">Cancel</button>
          <button type="button" class="btn primary" id="archiveSaveBtn">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Archive Detail Modal -->
  <div id="archive-detail-modal" class="category-modal">
    <div class="category-modal-content">
      <div class="sticky-tape" style="position: absolute; top: 12px; left: 50%; transform: translateX(-50%); width: 60px; height: 8px; background: rgba(0,0,0,0.2); border-radius: 3px; z-index: 10;"></div>
      <div class="category-modal-header">
        <h2 id="archive-detail-title"></h2>
        <button class="category-modal-close" onclick="closeArchiveDetail()" aria-label="Close modal">&times;</button>
      </div>
      <div class="category-modal-meta">
        <span id="archive-detail-tag"></span>
      </div>
      <div class="category-modal-body">
        <div id="archive-detail-content"></div>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <p>¬© 2025 Kenechi Obiozor.</p>
  </footer>

  <style>
    .page-lock {
      position: fixed;
      inset: 0;
      background: rgba(5, 5, 5, 0.9);
      backdrop-filter: blur(12px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .page-lock.active {
      opacity: 1;
      pointer-events: auto;
    }

    .page-lock-card {
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 16px;
      padding: 28px;
      width: min(420px, 92vw);
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .page-lock-card h2 {
      font-family: var(--font-serif);
      margin-bottom: 8px;
    }

    .page-lock-card p {
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    #archive-lock-form {
      display: grid;
      gap: 12px;
    }

    #archive-lock-input {
      padding: 12px 16px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-primary);
      font-size: 1rem;
    }

    .page-lock-error {
      min-height: 20px;
      color: #f87171;
      margin-top: 8px;
      font-size: 0.9rem;
    }

    .archive-lock-toggle {
      padding: 10px 18px;
      font-size: 0.8rem;
      margin-left: 12px;
      white-space: nowrap;
    }

    body.locked {
      overflow: hidden;
    }
  </style>

  <script src="/js/search-index.js"></script>
  <script src="/js/site-search.js"></script>
  <script src="/js/security.js"></script>
  <script>
    const ARCHIVE_LOCK_HASH = "e464086987a59f5748054130383a2b9ddd7196fea110dd7da0e3d4fd29fb2838";
    const ARCHIVE_LOCK_SALT = "archive-v1";
    const archiveLock = document.getElementById('archive-lock');
    const archiveForm = document.getElementById('archive-lock-form');
    const archiveInput = document.getElementById('archive-lock-input');
    const archiveError = document.getElementById('archive-lock-error');
    const lockToggle = document.getElementById('archive-lock-toggle');
    const archiveKey = 'archiveUnlockedHash';
    const ARCHIVE_STORAGE_KEY = 'archiveEntries';
    const archiveGrid = document.getElementById('archive-grid');
    const archiveAdminBtn = document.getElementById('archiveAdminBtn');
    let isArchiveAdminMode = false;
    let editingArchiveIndex = null;

    const defaultArchiveEntries = [
      {
        title: 'The Anatomy of Suspense',
        tag: 'Horror & Film',
        tagClass: 'tag-horror',
        description: 'Analyzing the ambient sound design in modern psychological horror...',
        image: 'https://images.unsplash.com/photo-1605806616949-1e87b487cb2a?q=80&w=800',
        size: 'tall',
        link: ''
      },
      {
        title: 'Silhouettes & Shadows',
        tag: 'Fashion',
        tagClass: 'tag-fashion',
        description: 'How abstract geometry is reshaping modern streetwear.',
        image: 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=800',
        size: '',
        link: ''
      },
      {
        title: 'Atmosphere as a Mechanic',
        tag: 'Gaming',
        tagClass: 'tag-gaming',
        description: 'Why the best video games rely on environmental storytelling over dialogue.',
        image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=800',
        size: 'wide',
        link: ''
      }
    ];

    function loadArchiveEntries() {
      const stored = localStorage.getItem(ARCHIVE_STORAGE_KEY);
      if (!stored) return defaultArchiveEntries;
      try {
        return JSON.parse(stored);
      } catch (error) {
        console.error('Failed to load archive entries', error);
        return defaultArchiveEntries;
      }
    }

    let archiveEntries = loadArchiveEntries();

    function saveArchiveEntries() {
      localStorage.setItem(ARCHIVE_STORAGE_KEY, JSON.stringify(archiveEntries));
    }

    function renderArchiveEntries() {
      if (!archiveGrid) return;
      archiveGrid.innerHTML = '';
      archiveEntries.forEach((entry, index) => {
        const wrapper = document.createElement('article');
        wrapper.className = `art-card ${entry.size || ''}`.trim();
        wrapper.style.backgroundImage = `url('${entry.image || ''}')`;
        wrapper.style.cursor = 'pointer';
        wrapper.innerHTML = `
          ${isArchiveAdminMode ? '<button class="archive-edit-btn" type="button">Edit</button>' : ''}
          <div class="card-content">
            <span class="tag ${entry.tagClass || ''}">${entry.tag || ''}</span>
            <h3>${entry.title || ''}</h3>
            <p>${entry.description || ''}</p>
          </div>
        `;
        
        // Click handler to open detail modal
        wrapper.addEventListener('click', (event) => {
          if (!event.target.classList.contains('archive-edit-btn')) {
            openArchiveDetail(index);
          }
        });
        
        if (isArchiveAdminMode) {
          const editBtn = wrapper.querySelector('.archive-edit-btn');
          if (editBtn) {
            editBtn.addEventListener('click', (event) => {
              event.preventDefault();
              event.stopPropagation();
              openArchiveEditor(index);
            });
          }
        }
        archiveGrid.appendChild(wrapper);
      });
    }

    function updateArchiveAdminButton() {
      if (archiveAdminBtn) {
        archiveAdminBtn.textContent = isArchiveAdminMode ? 'üîì' : 'üîí';
      }
    }

    function openArchiveDetail(index) {
      const entry = archiveEntries[index];
      const modal = document.getElementById('archive-detail-modal');
      const title = document.getElementById('archive-detail-title');
      const tag = document.getElementById('archive-detail-tag');
      const content = document.getElementById('archive-detail-content');
      
      title.textContent = entry.title || '';
      tag.textContent = entry.tag || '';
      
      // Build content with image and description
      let contentHtml = '';
      if (entry.image) {
        contentHtml += `<img src="${entry.image}" alt="${entry.title}" style="width: 100%; border-radius: 12px; margin-bottom: 16px;" />`;
      }
      if (entry.description) {
        contentHtml += `<p style="color: #000;">${entry.description}</p>`;
      }
      if (entry.link) {
        contentHtml += `<p style="margin-top: 16px;"><a href="${entry.link}" target="_blank" rel="noopener noreferrer" style="color: #5656d7; text-decoration: underline;">Learn more ‚Üí</a></p>`;
      }
      
      content.innerHTML = contentHtml;
      
      // Style modal
      const modalContent = modal.querySelector('.category-modal-content');
      if (modalContent) {
        modalContent.style.background = '#f5f5f5';
      }
      
      // Make all text dark
      const textNodes = modal.querySelectorAll('.category-modal-body p, .category-modal-body li, .category-modal-body a');
      textNodes.forEach(node => {
        node.style.color = '#000';
      });
      
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeArchiveDetail() {
      const modal = document.getElementById('archive-detail-modal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
    }

    function updateArchiveAdminButton() {
      if (archiveAdminBtn) {
        archiveAdminBtn.textContent = isArchiveAdminMode ? 'üîì' : 'üîí';
      }
    }

    function openArchiveAdminModal() {
      const modal = document.getElementById('archive-admin-modal');
      const input = document.getElementById('archiveAdminPassword');
      const error = document.getElementById('archive-admin-error');
      if (error) error.style.display = 'none';
      if (input) input.value = '';
      if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
      }
    }

    function closeArchiveAdminModal() {
      const modal = document.getElementById('archive-admin-modal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
    }

    function openArchiveEditor(index = null) {
      editingArchiveIndex = index;
      const entry = index !== null ? archiveEntries[index] : null;
      document.getElementById('archiveTitle').value = entry?.title || '';
      document.getElementById('archiveTag').value = entry?.tag || '';
      document.getElementById('archiveTagClass').value = entry?.tagClass || 'tag-horror';
      document.getElementById('archiveImage').value = entry?.image || '';
      document.getElementById('archivePhoto').value = '';
      document.getElementById('archiveDescription').value = entry?.description || '';
      document.getElementById('archiveLink').value = entry?.link || '';
      const deleteBtn = document.getElementById('archiveDeleteBtn');
      if (deleteBtn) deleteBtn.style.display = index !== null ? 'inline-flex' : 'none';

      const modal = document.getElementById('archive-editor-modal');
      if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
      }
    }

    function closeArchiveEditor() {
      const modal = document.getElementById('archive-editor-modal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
      editingArchiveIndex = null;
    }
    let isLocked = true;

    function setLocked(lockedState) {
      isLocked = lockedState;
      lockToggle.textContent = isLocked ? 'Unlock Archive' : 'Lock Archive';

      if (isLocked) {
        document.body.classList.add('locked');
        archiveLock.classList.add('active');
        archiveLock.setAttribute('aria-hidden', 'false');
        setTimeout(() => archiveInput.focus(), 50);
      } else {
        document.body.classList.remove('locked');
        archiveLock.classList.remove('active');
        archiveLock.setAttribute('aria-hidden', 'true');
      }
    }

    async function sha256(text) {
      const encoder = new TextEncoder();
      const data = encoder.encode(text);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');
    }

    async function initLock() {
      if (!ARCHIVE_LOCK_HASH || ARCHIVE_LOCK_HASH === 'REPLACE_WITH_SHA256_HASH') {
        archiveError.textContent = 'Lock not configured yet.';
        setLocked(true);
        return;
      }

      const unlocked = localStorage.getItem(archiveKey) === ARCHIVE_LOCK_HASH;
      setLocked(!unlocked);
    }

    archiveForm.addEventListener('submit', async (event) => {
      event.preventDefault();
      archiveError.textContent = '';

      const password = archiveInput.value.trim();
      if (!password) {
        archiveError.textContent = 'Please enter a password.';
        return;
      }

      const attemptHash = await sha256(`${ARCHIVE_LOCK_SALT}:${password}`);
      if (attemptHash === ARCHIVE_LOCK_HASH) {
        localStorage.setItem(archiveKey, ARCHIVE_LOCK_HASH);
        archiveInput.value = '';
        setLocked(false);
      } else {
        archiveError.textContent = 'Incorrect password.';
      }
    });

    lockToggle.addEventListener('click', () => {
      if (isLocked) {
        setLocked(true);
      } else {
        localStorage.removeItem(archiveKey);
        setLocked(true);
      }
    });

    if (archiveAdminBtn) {
      archiveAdminBtn.addEventListener('click', () => {
        if (isArchiveAdminMode) {
          openArchiveEditor(null);
        } else {
          openArchiveAdminModal();
        }
      });
    }

    const archiveAdminForm = document.getElementById('archive-admin-form');
    if (archiveAdminForm) {
      archiveAdminForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        
        // Check rate limiting
        if (isPasswordRateLimited('archive_admin')) {
          alert('Too many failed attempts. Please wait 15 minutes before trying again.');
          return;
        }
        
        const input = document.getElementById('archiveAdminPassword');
        const error = document.getElementById('archive-admin-error');
        if (!input) return;
        const attemptHash = await sha256(`${ARCHIVE_LOCK_SALT}:${input.value}`);
        if (attemptHash === ARCHIVE_LOCK_HASH) {
          isArchiveAdminMode = true;
          updateArchiveAdminButton();
          
          // Show label settings panel
          const settingsPanel = document.getElementById('archive-label-settings');
          if (settingsPanel) {
            settingsPanel.style.display = 'block';
          }
          
          renderArchiveEntries();
          resetPasswordAttempts('archive_admin');
        } else {
          trackPasswordAttempt('archive_admin');
          if (error) {
            error.style.display = 'block';
          }
        }
      });
    }

    const archiveSaveBtn = document.getElementById('archiveSaveBtn');
    if (archiveSaveBtn) {
      archiveSaveBtn.addEventListener('click', () => {
        let image = document.getElementById('archiveImage').value.trim();
        
        // Validate image URL
        if (image && !isValidURL(image)) {
          alert('Invalid image URL');
          return;
        }
        
        const photoInput = document.getElementById('archivePhoto');
        
        // Sanitize all inputs
        const entry = {
          title: sanitizeInput(document.getElementById('archiveTitle').value.trim()),
          tag: sanitizeInput(document.getElementById('archiveTag').value.trim()),
          tagClass: document.getElementById('archiveTagClass').value,
          description: sanitizeHTML(document.getElementById('archiveDescription').value.trim()),
          link: document.getElementById('archiveLink').value.trim(),
          size: ''
        };
        
        // Validate link if provided
        if (entry.link && !isValidURL(entry.link)) {
          alert('Invalid link URL');
          return;
        }

        // Handle photo upload
        if (photoInput && photoInput.files && photoInput.files[0]) {
          const file = photoInput.files[0];
          
          // Validate file
          const validation = validateFileUpload(file);
          if (!validation.valid) {
            alert(validation.error);
            return;
          }
          
          const reader = new FileReader();
          reader.onload = function(e) {
            entry.image = e.target.result; // Use base64
            saveArchiveEntry(entry);
          };
          reader.onerror = function() {
            alert('Failed to read file');
          };
          reader.readAsDataURL(file);
        } else {
          entry.image = image;
          saveArchiveEntry(entry);
        }
      });

      function saveArchiveEntry(entry) {
        if (editingArchiveIndex !== null) {
          archiveEntries[editingArchiveIndex] = { ...archiveEntries[editingArchiveIndex], ...entry };
        } else {
          archiveEntries.push(entry);
        }
        saveArchiveEntries();
        renderArchiveEntries();
        closeArchiveEditor();
      }
    }

    const archiveDeleteBtn = document.getElementById('archiveDeleteBtn');
    if (archiveDeleteBtn) {
      archiveDeleteBtn.addEventListener('click', () => {
        if (editingArchiveIndex === null) return;
        archiveEntries.splice(editingArchiveIndex, 1);
        saveArchiveEntries();
        renderArchiveEntries();
        closeArchiveEditor();
      });
    }

    const archiveAdminModal = document.getElementById('archive-admin-modal');
    if (archiveAdminModal) {
      archiveAdminModal.addEventListener('click', (event) => {
        if (event.target === archiveAdminModal) closeArchiveAdminModal();
      });
    }

    const archiveEditorModal = document.getElementById('archive-editor-modal');
    if (archiveEditorModal) {
      archiveEditorModal.addEventListener('click', (event) => {
        if (event.target === archiveEditorModal) closeArchiveEditor();
      });
    }

    const archiveDetailModal = document.getElementById('archive-detail-modal');
    if (archiveDetailModal) {
      archiveDetailModal.addEventListener('click', (event) => {
        if (event.target === archiveDetailModal) closeArchiveDetail();
      });
    }

    // Close detail modal on escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeArchiveDetail();
      }
    });

    updateArchiveAdminButton();
    renderArchiveEntries();
    initLock();
    loadArchiveLabels();
    
    // =========================================
    // CUSTOM LABEL MANAGEMENT FOR ARCHIVE
    // =========================================
    
    const DEFAULT_ARCHIVE_LABELS = {
      title: 'Title',
      tag: 'Tag',
      description: 'Description'
    };
    
    function getArchiveLabels() {
      const stored = localStorage.getItem('archiveCustomLabels');
      return stored ? JSON.parse(stored) : { ...DEFAULT_ARCHIVE_LABELS };
    }
    
    window.saveArchiveLabels = function() {
      const labels = {
        title: document.getElementById('labelArchiveTitle').value.trim() || DEFAULT_ARCHIVE_LABELS.title,
        tag: document.getElementById('labelArchiveTag').value.trim() || DEFAULT_ARCHIVE_LABELS.tag,
        description: document.getElementById('labelArchiveDescription').value.trim() || DEFAULT_ARCHIVE_LABELS.description
      };
      
      localStorage.setItem('archiveCustomLabels', JSON.stringify(labels));
      applyArchiveLabels(labels);
      alert('Labels saved successfully!');
    };
    
    window.resetArchiveLabels = function() {
      localStorage.removeItem('archiveCustomLabels');
      const labels = { ...DEFAULT_ARCHIVE_LABELS };
      
      document.getElementById('labelArchiveTitle').value = labels.title;
      document.getElementById('labelArchiveTag').value = labels.tag;
      document.getElementById('labelArchiveDescription').value = labels.description;
      
      applyArchiveLabels(labels);
      alert('Labels reset to defaults!');
    };
    
    function loadArchiveLabels() {
      const labels = getArchiveLabels();
      
      const labelTitle = document.getElementById('labelArchiveTitle');
      const labelTag = document.getElementById('labelArchiveTag');
      const labelDescription = document.getElementById('labelArchiveDescription');
      
      if (labelTitle) labelTitle.value = labels.title;
      if (labelTag) labelTag.value = labels.tag;
      if (labelDescription) labelDescription.value = labels.description;
      
      applyArchiveLabels(labels);
    }
    
    function applyArchiveLabels(labels) {
      // Update editor labels
      const titleInput = document.getElementById('archiveTitle');
      if (titleInput) {
        const label = titleInput.closest('.form-group')?.querySelector('label');
        if (label) label.childNodes[0].nodeValue = labels.title + ' ';
      }
      
      const tagInput = document.getElementById('archiveTag');
      if (tagInput) {
        const label = tagInput.closest('.form-group')?.querySelector('label');
        if (label) label.childNodes[0].nodeValue = labels.tag + ' ';
      }
      
      const descTextarea = document.getElementById('archiveDescription');
      if (descTextarea) {
        const label = descTextarea.closest('.form-group')?.querySelector('label');
        if (label) label.childNodes[0].nodeValue = labels.description + ' ';
      }
    }
  </script>

  <!-- Emoji Picker Modal -->
  <div id="emoji-picker-modal" class="emoji-picker-modal">
    <div class="emoji-picker-content">
      <div class="emoji-picker-header">
        <h3>Select Emoji</h3>
        <button class="emoji-close-btn" onclick="closeEmojiPicker()">&times;</button>
      </div>
      <div class="emoji-categories">
        <button class="emoji-cat-btn active" data-category="smileys">üòä</button>
        <button class="emoji-cat-btn" data-category="hearts">‚ù§Ô∏è</button>
        <button class="emoji-cat-btn" data-category="hands">üëç</button>
        <button class="emoji-cat-btn" data-category="activities">‚öΩ</button>
        <button class="emoji-cat-btn" data-category="objects">üí°</button>
        <button class="emoji-cat-btn" data-category="symbols">‚ú®</button>
        <button class="emoji-cat-btn" data-category="nature">üå∏</button>
        <button class="emoji-cat-btn" data-category="food">üçï</button>
      </div>
      <div class="emoji-grid" id="emojiGrid"></div>
    </div>
  </div>

  <script src="/js/emoji-picker.js"></script>
</body>
</html>
